<!DOCTYPE html>
<html><meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>ENSEIGNER LE TDD Â· Romain Berthon</title>



<link rel="stylesheet" href="/css/rocinante.css" />
<link rel="shortcut icon" href="favicon.ico">


<body>
    <header><nav>
  <div>
    
      <a href="https://romaintrm.github.io/">â€¹ Home</a>
    
  </div>
  <div></div>
  <div>
    <a href="https://romaintrm.github.io//tags/post">Posts</a>
    <a href="https://romaintrm.github.io//tags/talk">Talks</a>
    
    
  </div>
</nav>
</header>
    <main>

    <div class="post">
        <div class="title-group">
            <div class="title">
                <h1>ENSEIGNER LE TDD</h1>
            </div>
            <div class="date"><h5>Apr 27, 2016</h5></div>
        </div>
        <article class="content">
            <p>Cela fait maintenant un an que je travaille comme prestataire pour un grand groupe. Ma mission y est des plus critique. Elle consiste Ã  dÃ©velopper et maintenir lâ€™ensemble des projets utilisÃ©s pour la programmation dâ€™objets connectÃ©s nÃ©cessaires Ã  lâ€™activitÃ© de lâ€™entreprise.</p>
<p>Mon Ã©quipe est constituÃ©e de plusieurs profilsÂ : des dÃ©veloppeurs, un product owner ainsi quâ€™un recetteur. Pour rÃ©pondre Ã  un fort besoin de qualitÃ©, les tests, et notamment les tests unitaires, constituent une composante majeure de notre travail. Les dÃ©veloppements se font donc systÃ©matiquement avec une approche TDD / BDD. Ces pratiques ont Ã©tÃ© mises en place par lâ€™Ã©quipe qui est complÃ¨tement libre dâ€™un point de vue opÃ©rationnel.</p>
<p>Au cours de cette mission, jâ€™ai Ã  deux reprises animÃ© des ateliers dâ€™initiation au TDD. La premiÃ¨re Ã©tait destinÃ©e Ã  notre recetteur qui souhaitait participer au dÃ©veloppement de ses outils de test. La seconde concernait un nouveau dÃ©veloppeur ayant dÃ©jÃ  reÃ§u une courte formation, mais quâ€™il nâ€™a jamais pu (suÂ ?) appliquer par la suite. Ces deux profils Ã©tant trÃ¨s diffÃ©rents, les problÃ©matiques rencontrÃ©es nâ€™ont donc pas Ã©tÃ© les mÃªmes, ce qui a rendu lâ€™exercice extrÃªmement intÃ©ressant.</p>
<h2 id="certains-prÃ©-requis">CERTAINS PRÃ‰-REQUIS</h2>
<p>AprÃ¨s plus dâ€™un an passÃ© Ã  lâ€™appliquer sur tous mes projets, le TDD est devenu une habitude pour moi, lâ€™appliquer me semblait simple. Dans un premier temps, jâ€™ai donc pensÃ© quâ€™il serait simple de lâ€™inculquer. Que nenniÂ !</p>
<p>Lors de mon premier atelier avec notre recetteur, la principale problÃ©matique que jâ€™ai rencontrÃ© Ã©tait liÃ©e Ã  des questions de design. En effet, celui-ci nâ€™avait jamais reÃ§u de vÃ©ritable formation, ses connaissances se rÃ©sumant Ã  ce quâ€™il avait appris sur le tas. Comme tout dÃ©butant (moi le premier Ã  mes dÃ©buts), son code souffrait dâ€™un vÃ©ritable manque dâ€™organisation, il Ã©tait fortement couplÃ©. Selon mon expÃ©rience, le premier prÃ©-requis consiste donc en un minimum de compÃ©tences en terme de conception (le sujet porte Ã  <a href="http://codurance.com/2015/05/12/does-tdd-lead-to-good-design/" target="_blank">dÃ©bat</a>), ceci pour que le dÃ©veloppeur puisse isoler les diffÃ©rentes responsabilitÃ©s de son code.</p>
<p>Toujours sur des problÃ©matiques de design, nous avons ensuite travaillÃ© sur la faÃ§on dont les Ã©lÃ©ments de notre code interagissent entre eux. Je lui ai donc expliquÃ© lâ€™utilisation de lâ€™injection de dÃ©pendance. Cela consiste Ã  expliciter ce que va utiliser le code (une fonction, une classe) en injectant les dÃ©pendances nÃ©cessaires pour son fonctionnement. De plus, pour rÃ©duire le couplage, les dÃ©pendances sont abstraites grÃ¢ce Ã  des interfaces (ou des classes de bases). Cette pratique rÃ©pond au L, au I et au D de <a href="https://fr.wikipedia.org/wiki/SOLID_%28informatique%29" target="_blank">SOLID</a>.</p>
<div class="highlight"><pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Csharp" data-lang="Csharp"><span style="display:flex;"><span><span style="color:#00a8c8">public</span> <span style="color:#00a8c8">class</span> <span style="color:#75af00">CashRegister</span>
</span></span><span style="display:flex;"><span><span style="color:#111">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#00a8c8">public</span> <span style="color:#00a8c8">int</span> <span style="color:#111">ComputePrice</span><span style="color:#111">(</span><span style="color:#111">IBasket</span> <span style="color:#111">basket</span><span style="color:#111">)</span> <span style="color:#111">[...]</span>
</span></span><span style="display:flex;"><span><span style="color:#111">}</span>
</span></span></code></pre></div><p>Dans mon exemple, jâ€™explicite que pour calculer un prix, ma classe <code>CashRegister</code> a besoin dâ€™un objet qui respecte le contrat dâ€™interface <code>IBasket</code>. Lâ€™usage dâ€™une interface rÃ©duisant le couplage, il est facile dâ€™injecter des comportements spÃ©cifiques lors de mes tests sans dÃ©pendre dâ€™une fonctionnalitÃ© annexe.</p>
<p>Une fois que le dÃ©veloppeur maÃ®trise ces concepts, il lui devient possible dâ€™apprendre Ã  Ã©crire des tests unitaires. Dans le cas contraire, il aura du mal Ã  percevoir le fonctionnement du TDD car il aura beaucoup trop de problÃ©matiques annexes Ã  gÃ©rer.</p>
<h2 id="donner-du-sens-aux-testsnbsp-une-approche-mÃ©tier">DONNER DU SENS AUX TESTSÂ : UNE APPROCHE MÃ‰TIER</h2>
<p>Pour lâ€™apprentissage du TDD en lui mÃªme, les difficultÃ©s ont Ã©tÃ© plus grandes pour notre nouveau dÃ©veloppeur. En effet, ayant plus dâ€™expÃ©rience, il lui a Ã©tÃ© plus difficile de sortir dâ€™une de ses habitudesÂ : essayer dâ€™apporter une rÃ©ponse technique Ã  un besoin mÃ©tier. Que lâ€™on ne se mÃ©prenne pas, je parle ici dâ€™un problÃ¨me de mÃ©thodologie.</p>
<p>TrÃ¨s concrÃ¨tement, lors dâ€™un atelier, jâ€™exprime successivement des besoins mÃ©tiers en aidant le dÃ©veloppeur Ã  appliquer le TDD pour les implÃ©menter. Les besoins Ã©voluent de sorte que le code nÃ©cessite un refactoring au cours de lâ€™exercice. A ce moment survient un problÃ¨me rÃ©curentÂ : <em>â€œComment vais je coder Ã§aÂ ?â€</em>. Le dÃ©veloppeur nâ€™est pas capable dâ€™Ã©crire son test si il ne sait comment va Ãªtre Ã©crit son code. Câ€™est lÃ  que jâ€™explique lâ€™importance des concepts mÃ©tiers dans les tests.</p>
<p>Un avantage des tests unitaires est quâ€™ils documentent le code. Un test spÃ©cifie le comportement quâ€™il valide. Mais ce test nâ€™a finalement pas de rÃ©el valeur si il nâ€™explicite pas lâ€™utilitÃ© de ce comportement. Par exempleÂ : <code>WhenComputePriceThenReturnValue</code> nâ€™est pas un intitulÃ© trÃ¨s clair. Je calcule un prix, trÃ¨s bien, mais le prix de quoiÂ ? Comment est-il calculÃ©Â ?</p>
<p>Le mÃªme test avec pour nom <code>WhenComputePriceThenReturnSumOfArticlesPriceOfBasket</code> exprime mieux la rÃ¨gle mÃ©tier testÃ©e. Personnellement jâ€™utilise le formalisme proposÃ© par <a href="https://twitter.com/sandromancuso" target="_blank">Sandro Mancuso</a>Â : le nom de la classe et de la mÃ©thode de test se lisent comme une phrase.</p>
<div class="highlight"><pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Csharp" data-lang="Csharp"><span style="display:flex;"><span><span style="color:#75af00">[TestFixture]</span>
</span></span><span style="display:flex;"><span><span style="color:#00a8c8">public</span> <span style="color:#00a8c8">class</span> <span style="color:#75af00">CashRegisterShould</span>
</span></span><span style="display:flex;"><span><span style="color:#111">{</span>
</span></span><span style="display:flex;"><span><span style="color:#75af00">    [Test]</span>
</span></span><span style="display:flex;"><span>    <span style="color:#00a8c8">public</span> <span style="color:#00a8c8">void</span> <span style="color:#111">ReturnSumOfArticlesPriceWhenComputePriceOfBasket</span><span style="color:#111">()</span> <span style="color:#111">[...]</span>
</span></span><span style="display:flex;"><span><span style="color:#111">}</span>
</span></span></code></pre></div><p>Si votre Ã©lÃ¨ve commence Ã  se questionner sur la faÃ§on dont il peut implÃ©menter, coupez court et recentrez son attention sur la rÃ©daction dâ€™un test explicite.</p>
<p>Maintenant que le test est Ã©crit, le dÃ©veloppeur peut rÃ©flÃ©chir Ã  comment implÃ©menter. Le test dÃ©crit les Ã©lÃ©ments nÃ©cessaires ainsi que leurs interactions, câ€™est donc la faÃ§on dont le code doit Ãªtre Ã©crit. Au cours de lâ€™exercice, il est donc important de faire attention aux termes que vous allez employer quand vous formulerez un nouveau besoin.</p>
<h2 id="faire-passer-un-cap">FAIRE PASSER UN CAP</h2>
<p>Bien entendu, la maÃ®trise de cette mÃ©thodologie ne sâ€™acquiÃ¨re pas en un simple atelier, seule la pratique le permet. GÃ©nÃ©ralement, il arrive un moment oÃ¹ apprendre le TDD peut devenir dÃ©courageant pour le dÃ©veloppeur. Parce que cela change ses vieilles habitudes. Parce que câ€™est une faÃ§on de rÃ©flÃ©chir qui est fatigante, qui nâ€™est pas encore naturelle, ce qui la rend difficile. Il est donc important dâ€™accompagner le dÃ©veloppeur jusquâ€™Ã  ce que celui-ci soit familier avec le TDD. Lâ€™essentiel est de le suivre et de rester disponible pour lâ€™aider quand il en ressent le besoin. Pour cela, des revues de son code (et ses tests) ainsi que des sÃ©ances de pair programming peuvent Ãªtre des bons moyens pour lâ€™aider Ã  progresser.</p>
<p>Lors de travail en pair programming avec mon Ã©quipe, il nous arrive dâ€™appliquer le <a href="http://c2.com/cgi/wiki?PairProgrammingPingPongPattern" target="_blank">ping-pong programming</a>. Nous procÃ©dons de la maniÃ¨re suivanteÂ : un dÃ©veloppeur Ã©crit un test, le second le fait passer puis Ã©crit le test suivant, et ainsi de suite. Cela nous permet de nous challenger et ainsi dâ€™amÃ©liorer le niveau de chacun. Câ€™est sans doute la meilleure technique que je peux conseiller pour un travail dans la durÃ©e.</p>
<h2 id="conclusion">CONCLUSION</h2>
<p>Lâ€™apprentissage du TDD est un travail quotidien qui nÃ©cessite une implication du dÃ©veloppeur et un accompagnement pour dÃ©buter.</p>
<p>Merci Ã  mes reviewers <a href="https://twitter.com/Ouarzy" target="_blank">Ouarzy</a> et <a href="https://twitter.com/nadegerouelle" target="_blank">NadÃ¨ge</a>.</p>
<hr>
<h2 id="commentaires">COMMENTAIRES</h2>
<!--Ajoutez votre commentaire ici-->
<p>Envie de commenter ? Sâ€™il vous plaÃ®t, ajoutez votre commentaire en m&rsquo;<a href="https://github.com/RomainTrm/Blog?tab=readme-ov-file#how-to-comment" target="_blank">envoyant une pull request</a>.</p>

        </article>
        
            <div class="tags">
                <span title="Tags">ğŸ·</span>
                <div class="horizontal-links links">
                    <a href="/tags/post/">Post</a><a href="/tags/fr/">Fr</a>
                </div>
            </div>
        
    </article>


    </main>
    <footer>
  <div class="content-container">
    <div class="content"><div class="about">
  <h2>Romain Berthon</h2>
  Software developer, *DD and F# enthusiast

  
    <p class="horizontal-links"><a href="https://github.com/RomainTrm"
         target="_blank" 
        
        >Github</a><a href="https://bsky.app/profile/romaintrm.bsky.social"
         target="_blank" 
        
        >Bsky</a><a href="https://fr.linkedin.com/in/romain-berthon-254977101"
         target="_blank" 
        
        >LinkedIn</a></p>
  
</div>
</div>
  </div>
</footer>
    
    <script>
      const emailId = atob("");
    </script></body>
</html>
