<!DOCTYPE html>
<html><meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>LES TESTS, CONTRE VENTS ET MARÃ‰ES Â· Blog: Romain Berthon</title>



<link rel="stylesheet" href="/css/rocinante.css" />
<link rel="shortcut icon" href="favicon.ico">


<body>
    <header><h2>
  
    <a href="https://romaintrm.github.io/">â€¹ Blog: Romain Berthon</a>
  
</h2>
</header>
    <main>

    <div class="post">
        <div class="title-group">
            <div class="title">
                <h1>LES TESTS, CONTRE VENTS ET MARÃ‰ES</h1>
            </div>
            <div class="date"><h5>May 04, 2016</h5></div>
        </div>
        <article class="content">
            <p>Connaissez vous la bernache nonnetteÂ ?</p>
<p><img src="1.png" alt="Une bernache nonnette et son petit"></p>
<p>Il sâ€™agit dâ€™une espÃ¨ce dâ€™oie vivant principalement dans les Ã®les arctiques. La bernache est exclusivement vÃ©gÃ©tarienne, et ce dÃ¨s sa naissance. Le problÃ¨me, câ€™est quâ€™elle a pour habitude de nicher au sommet dâ€™une falaise pour se protÃ©ger elle et ses Å“ufs des prÃ©dateurs terrestres. Les oisillons ne sachant pas voler avant lâ€™Ã¢ge de 40-45 jours, il faut que ceux-ci puissent descendre de la falaise pour se nourrir.</p>
<h2 id="un-grand-saut">UN GRAND SAUT</h2>
<p>Pour ce faire, les parents se placent en bas la falaise et appellent leurs petits jusquâ€™Ã  ce que ceux-ci, guidÃ©s par leur instinct, se dÃ©cident Ã  sauter dans le vide. La chute est pour le moins impressionnante, parfois sur plus dâ€™une centaine de mÃ¨tres avec un Ã©boulis en contre bas. Malheureusement tous nâ€™y survivent pas, certains font une mauvaise rÃ©ception, dâ€™autres continuent Ã  dÃ©valer la pente avant de sâ€™arrÃªter. Les rescapÃ©s sont quant a eux sonnÃ©s pendant quelques temps, ce qui relÃ¨ve dÃ©jÃ  de lâ€™exploit compte tenu de lâ€™impact auquel ils viennent de rÃ©sister.</p>
<p><img src="2.png" alt="Une falaise avec un chuteur"></p>
<p>ReplaÃ§ons nous maintenant dans un contexte de dÃ©veloppement logiciel. Vous Ãªtes un dÃ©veloppeur travaillant sur un projet professionnel. Votre manager / client (rayez la mention inutile) a une influence prÃ©judiciable, en effet il vous pousse Ã  produire rapidement en nÃ©gligeant les bonnes pratiques. Quâ€™allez vous faireÂ ?</p>
<p>Avancer sur un projet sans bonnes pratiques, câ€™est comme sauter dans le vide quand on ne sait pas volerÂ : vous ne maÃ®triserez rien, vous vous contenterez de subir (je reviens sur ce point plus bas). Avec de la chance vous en viendrez tout de mÃªme Ã  bout, mais dans tous les cas cela se fera dans la douleur.</p>
<h2 id="une-progression-maÃ®trisÃ©e">UNE PROGRESSION MAÃTRISÃ‰E</h2>
<p>Je suis un dÃ©veloppeur passionnÃ©, qui Ã©prouve un rÃ©el plaisir Ã  produire des applications de qualitÃ©. Jâ€™ai donc Ã©normÃ©ment de mal Ã  mâ€™imaginer Ãªtre obligÃ© de sacrifier mes bonnes pratiques au nom dâ€™une soi-disant productivitÃ©.</p>
<p>Il y en a une qui, selon moi, doit Ãªtre utilisÃ©e pour nâ€™importe quel projetÂ : les tests unitaires. Lâ€™application du TDD associÃ© Ã  un processus dâ€™intÃ©gration continue me semble indispensable. Le but est simpleÂ : les dÃ©veloppeurs ont un feedback le plus rapide possible Ã  chaque opÃ©ration menÃ©e sur le code source. Cela permet de maÃ®triser le pÃ©rimÃ¨tre de lâ€™application au fil de son dÃ©veloppement, et ainsi de le faire Ã©voluer sans dÃ©grader lâ€™existant.</p>
<p>Pour faire un parallÃ¨le avec notre bernache, utiliser les tests unitaires revient Ã  choisir la cage dâ€™escalier plutÃ´t que la chute libre sans parachute. Vous descendez la falaise palier par palier, avec des Ã©tats intermÃ©diaires stables. Cette solution est beaucoup moins douloureuse pour tout le monde..</p>
<p>Oui, vous Ã©tiez dÃ©jÃ  convaincus, mais pourtant vous ne le faites pas. Je vous vois venirâ€¦</p>
<h2 id="mes-managers-ne-veulent-pas-des-tests">MES MANAGERS NE VEULENT PAS DES TESTS</h2>
<p>On ne va pas se mentir, les miens nâ€™Ã©taient pas convaincus non plus, ils ont fini par changer dâ€™avis. Mais finalement, pourquoiÂ ?</p>
<p><em>â€œParce quâ€™Ã©crire les tests Ã§a fait perdre de temps.â€</em></p>
<p>On a tous dÃ©jÃ  entendu quelquâ€™un tenir un discours de ce genre. Il peut vous sembler absurde, mais il a rÃ©ellement du sens pour celui qui le prononce. En fait ces personnes nâ€™ont pas toujours conscience des problÃ©matiques dâ€™une Ã©quipe de dÃ©veloppement. Un logiciel se rÃ©sume pour eux Ã  des fonctionnalitÃ©s quâ€™il faut implÃ©menter en Ã©vitant au maximum les anomalies. Ils ne voient que la partie Ã©mergÃ©e de lâ€™iceberg, vouloir travailler avec des tests peut donc ressembler Ã  un â€œcaprice de dÃ©veloppeurâ€.</p>
<table>
<thead>
<tr>
<th>Valeur</th>
<th>Visible</th>
<th>Invisible</th>
</tr>
</thead>
<tbody>
<tr>
<td>Positive</td>
<td>Feature</td>
<td>Architecture</td>
</tr>
<tr>
<td>NÃ©gative</td>
<td>Bug</td>
<td>Code legacy</td>
</tr>
</tbody>
</table>
<p>Contrairement Ã  ces personnes, si vous souhaitez travailler avec des tests, câ€™est que vous avez compris les vÃ©ritables enjeux de telles pratiques. Vous avez conscience quâ€™une bonne architecture vous permet dâ€™avancer de maniÃ¨re efficace, en conservant une souplesse de travail et une facilitÃ© Ã  maintenir lâ€™existant. A lâ€™inverse, plus le code legacy sâ€™installe dans votre projet, plus votre travail va devenir complexe, et par consÃ©quent vos taches vont devenir de plus en plus longues.</p>
<p>En fait, si vous souhaitez faire accepter les tests Ã  des personnes qui nâ€™en veulent pas, il faut leurs faire comprendre lâ€™influence du code legacy.</p>
<h2 id="le-code-legacy">LE CODE LEGACY</h2>
<p>Pour faire court, le code legacy est du code qui nâ€™est pas testÃ©, que vous ne comprenez pas et/ou dont vous ne maÃ®trisez pas les effets de bord. Un de mes collÃ¨gues le dÃ©finit aussi comme le code que lâ€™on a peur de modifier.</p>
<p><img src="3.png" alt="Piles de pierres en Ã©quilibre"></p>
<p>On peut voir mes pierres comme un legacy, lâ€™Ã©quilibre de la structure est des plus prÃ©caire. A la moindre modification que vous allez tenter, vous ajouterez un peu plus de legacy Ã  celui que vous subissez dÃ©jÃ , tout en risquant de voir le lâ€™ensemble sâ€™effondrer. Plus grave encore, vous ne serez pas capable de mesurer les effets de bord produits par vos modifications. Vos dÃ©veloppements seront donc de plus en plus longs, de plus en plus difficiles et source de plus dâ€™anomalies. Vous subissez vÃ©ritablement votre projet, vous Ãªtes pris dans un cercle vicieux.</p>
<p><img src="4.png" alt="Cercle vicieux&amp;nbsp;: moins de tests -&gt; plus de problÃ¨mes -&gt; plus de pression -&gt; moins de tests"></p>
<p>Câ€™est pourquoi lâ€™argument <em>â€œles tests Ã§a coÃ»te du tempsâ€</em> nâ€™est pas recevable. Oui, pris de maniÃ¨re isolÃ©e, un test a un coÃ»t. Mais nous les Ã©crivons pour valider des comportements et protÃ©ger notre code contre les rÃ©gressions. Si vous Ã©crivez des tests, vous vous affranchirez donc du code legacy puisque vous maÃ®triserez ce qui est codÃ©. Cela vous donne Ã©galement la possibilitÃ© de faire du refactoring.</p>
<h2 id="le-refactoring">LE REFACTORING</h2>
<p>Encore un gros mot qui fait peur Ã  votre manager. Pourtant le refactoring est essentiel dans la vie dâ€™un projet, surtout si vous souhaitez tendre vers une meilleure architecture.</p>
<p>Le refactoring, câ€™est comme le code du boy scout. Si je vais camper quelque part, alors je mâ€™assure de laisser cet endroit propre en le quittant. Je ramasse donc mes dÃ©chets, mais aussi ceux des gens qui sont passÃ©s avant moi. Dans une application, le but est donc de toujours rendre le code plus lisible, lâ€™architecture plus souple, le modÃ¨le plus expliciteâ€¦ Le comportement du code que je vais modifier Ã©tant protÃ©gÃ© par les tests, je peux faire mes modifications sans risque de rÃ©gression.</p>
<p>Tous les refactoring nâ€™impliquent pas des modifications majeures, en fait, câ€™est mÃªme le contraire. Il peut sâ€™agir dâ€™actions trÃ¨s simples comme renommer une propriÃ©tÃ©, supprimer une dÃ©pendance inutile, etc. On parle gÃ©nÃ©ralement de micro-refactorings, ils prennent peu de temps sâ€™ils sont menÃ©s tout au long du projet, de maniÃ¨re complÃ¨tement informelle, dÃ©s quâ€™une opportunitÃ© se prÃ©sente.</p>
<p>Un refactoring majeur implique gÃ©nÃ©ralement une Ã©volution dâ€™un concept clÃ© dans lâ€™architecture. Elle se fait soit pour rÃ©pondre Ã  une Ã©volution du mÃ©tier, soit pour Ã©liminer un problÃ¨me de conception. Ils ne sont donc pas systÃ©matiques.</p>
<p>Lâ€™application des tests est donc vertueux pour un projet. Il vous permet de ne pas souffrir du code legacy et vous donne Ã©galement les moyens dâ€™amÃ©liorer votre architecture. Vous gagnez en temps et en qualitÃ©Â !</p>
<p><img src="5.png" alt="Cercle vertueux&amp;nbsp;: plus de tests -&gt; moins de problÃ¨mes -&gt; moins de pression -&gt; plus de tests"></p>
<h2 id="mon-client-ne-veut-pas-payer-pour-des-tests">MON CLIENT NE VEUT PAS PAYER POUR DES TESTS</h2>
<p>Ce nâ€™est pas bien grave puisque votre client a un besoin. Le logiciel quâ€™il vous demande doit y rÃ©pondre, bien y rÃ©pondre mÃªme puisque quâ€™il a une valeur ajoutÃ©e pour votre client. Finalement, la faÃ§on dont vous travaillez ne le concerne pas, alors pourquoi se contraindre avec ce quâ€™il veutÂ ? Sâ€™il est soucieux de la qualitÃ© de son produit, vous pouvez valoriser vos pratiques. Dans le cas contraire, vous pouvez juste â€œomettreâ€ dâ€™en parler. Dâ€™autant plus que nous avons vu que les tests nâ€™augmentent pas les coÃ»ts.</p>
<p>Si vous souhaitez tout de mÃªme lui faire accepter, alors faites lui voir le dÃ©veloppement logiciel comme de lâ€™artisanatÂ : du <em>Software Craftsmanship</em>. Ce qui a du sens, on ne produit pas une application comme lâ€™on produit une voiture sur une chaÃ®ne de production. Chaque projet est diffÃ©rent, on ne sait donc pas automatiser les dÃ©veloppements, le facteur humain est par consÃ©quent trÃ¨s important. Votre client paye pour une expertise quâ€™il nâ€™a pas lui mÃªme. Il me semble donc aberrant quâ€™il puisse vous dicter la faÃ§on dont vous allez travailler.</p>
<p>On peut sâ€™imaginer faire appel Ã  un plombier pour rÃ©parer une fuite dâ€™eau dans votre cuisine. Vous avez deux optionsÂ :</p>
<ul>
<li><em>Pour payer moins cher, nâ€™amenez pas vos outils, je vous fournirai les miens.</em> RÃ©sultat, votre pauvre plombier se retrouve avec une clÃ© de 12 et un vieux rouleau dâ€™adhÃ©sif pour faire sa rÃ©paration. Ã‰tant mal Ã©quipÃ©, il rÃ©pare tant bien que mal votre fuite, ce qui lui demande plus de temps quâ€™Ã  son habitude, et pour un rÃ©sultat des plus douteux. Bref, la rÃ©paration ne tiendra pas et vous devrez faire refaire le travail deux semaines plus tard, ce qui va vous coÃ»ter cher.</li>
<li>Vous lui faites confiance, aprÃ¨s tout câ€™est un professionnel. Ã‰tant parfaitement Ã©quipÃ©, le travail est rapidement rÃ©alisÃ© et de qualitÃ©. Finalement vous nâ€™entendrez plus parler de votre fuite dâ€™eau. Vous avez payÃ© la qualitÃ© du service.</li>
</ul>
<p>Nâ€™importe quâ€™elle personne est capable de comprendre ceci, il suffit juste de le lui faire entendre.</p>
<p>Accepter des exigences de ce genre revient Ã  se tirer une balle dans le pied. Votre travail ne sera pas de la qualitÃ© espÃ©rÃ©e, et votre client ira probablement voir chez la concurrence quand il aura Ã  nouveau besoin dâ€™une prestation informatique. A lâ€™inverse, prÃ´ner la qualitÃ© vous fera peut-Ãªtre perdre quelques clients proches de leur argent, mais vous assurera une image de marque grÃ¢ce Ã  une trÃ¨s grande majoritÃ© de vos clients satisfaits et fidÃ©lisÃ©s.</p>
<h2 id="pour-conclure">POUR CONCLURE</h2>
<p>Jâ€™espÃ¨re avoir donnÃ© quelques Ã©lÃ©ments pour expliquer lâ€™intÃ©rÃªt des tests unitaires, aussi bien pour vous que pour votre entreprise et vos clients. Si malgrÃ© tout vous nâ€™arrivez pas Ã  convaincre, vous Ãªtes toujours libre de passer outre, les rÃ©sultats finiront par parler dâ€™eux mÃªmes.</p>
<p>Jâ€™ai fait partie de lâ€™Ã©quipe qui a introduit pour la premiÃ¨re fois les tests unitaires dans mon entreprise. Ce sont les dÃ©veloppeurs qui ont pris et portÃ© cette dÃ©cision. Finalement, le projet sâ€™est rÃ©vÃ©lÃ© Ãªtre un vÃ©ritable succÃ¨s, le suivant Ã©galement. Les mentalitÃ©s ont fini par changer, Ã  tel point que tous les projets sont maintenant vendus en affichant clairement ces pratiques.</p>
<p>Enfin, Martin Fowler explique beaucoup mieux que moi tous ces enjeux, notamment au travers de lâ€™<a href="https://www.thoughtworks.com/talks/software-development-21st-century-xconf-europe-2014" target="_blank">intÃ©gration continue</a>.</p>
<p>A vous de jouerÂ !</p>
<p>Merci Ã  mes reviewers <a href="https://twitter.com/Ouarzy" target="_blank">Ouarzy</a> et <a href="https://twitter.com/nadegerouelle" target="_blank">NadÃ¨ge</a>.</p>
<hr>
<h2 id="commentaires">COMMENTAIRES</h2>
<!--Ajoutez votre commentaire ici-->
<p>Envie de commenter ? Sâ€™il vous plaÃ®t, ajoutez votre commentaire en m&rsquo;<a href="https://github.com/RomainTrm/Blog?tab=readme-ov-file#how-to-comment" target="_blank">envoyant une pull request</a>.</p>

        </article>
        
            <div class="tags">
                <span title="Tags">ğŸ·</span>
                <div class="horizontal-links links">
                    <a href="/tags/post/">Post</a><a href="/tags/fr/">Fr</a>
                </div>
            </div>
        
    </article>


    </main>
    <footer>
  <div class="content-container">
    <div class="content">Software developer, *DD and F# enthusiast


  <p class="horizontal-links"><a href="https://github.com/RomainTrm"
        target="_blank" 
       
      >Github</a><a href="https://bsky.app/profile/romaintrm.bsky.social"
        target="_blank" 
       
      >Bsky</a><a href="https://fr.linkedin.com/in/romain-berthon-254977101"
        target="_blank" 
       
      >LinkedIn</a></p>

</div>
  </div>
</footer>
    
    <script>
      const emailId = atob("");
    </script></body>
</html>
